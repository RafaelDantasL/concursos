document.getElementById('htmlForm').onsubmit = async function(event) {
    event.preventDefault();

    const filename = document.getElementById('filename').value;
    const content = document.getElementById('content').value;
    const encodedContent = btoa(content);

    const token = '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'; // Insira seu novo token
    const owner = 'RafaelDantasL';
    const repo = 'concursos';
    const branch = 'main';

    const url = `https://api.github.com/repos/${owner}/${repo}/contents/${filename}`;

    const requestBody = {
        message: `Criando ou editando o arquivo ${filename} via formulário HTML`,
        content: encodedContent,
        branch: branch
    };

    try {
        const response = await fetch(url, {
            method: 'PUT',
            headers: {
                'Authorization': `token ${token}`,
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(requestBody)
        });

        if (response.ok) {
            document.getElementById('responseMessage').innerText = 'Arquivo criado/editado com sucesso!';
        } else {
            document.getElementById('responseMessage').innerText = `Erro: ${response.status} - ${response.statusText}`;
        }
    } catch (error) {
        document.getElementById('responseMessage').innerText = `Erro na requisição: ${error}`;
    }
};
